<!DOCTYPE html>

<html>
<head>
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <link href="favicon.ico" rel="shortcut icon">

  <title>Mobile Robots (EMOR) tutorials</title>
  <link href="style.css" rel="stylesheet">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
</head>

<body>
  <div class="page">

    <div class="heading_body">
      <div style="text-align:left; font-size:160%;">
        <strong>Mobile Robots (EMOR)</strong> tutorials.
      </div>
    </div>

    <div class="content_body">
      <div id="menu">
        <a class="top" href="index.html">TRS</a>
        <a href="setup.html">Setup</a>
	<a href="project1.html">Project 1</a>
	<a href="project2.html">Project 2</a>
	<a href="project3.html">Project 3</a>
	        <a class="submenu" href="project3.html#description">Description</a>
	<a href="api.html">API Documentation</a>
	<a href="tips.html">Tips & Tricks</a>
	<a href="troubleshooting.html">Troubleshooting</a>
      </div>

      <div class="content">
      
<a id="description" name="description"></a>
<h1 style="margin-top: 0">Description</h1>

<p>The goal of the third EMOR tutorial is to write a program enabling youBot to <b>localize itself</b> with the use of particle filter.
This task is broken into two subproblems:
<ol>
  <li>generation of random, yet collision-less trajectory</li>
  <li>implementation of the particle filter-based localization, executed for each of subsequent robot poses</li>
</ol>

The robot should use laser scanners in order to:
<ol>
  <li>detect the wall and avoid collisions</li>
  <li>update the set of particles, each representing a possible (single) robot pose in the form of [x;y;orientation]</li>
</ol>

<p>Similarly to the previous tutorial, you should write your program on the basis of <code>exercise03.m</code> script, by modifying the section between the
<b>% EMOR exercise begin</b> and <b>% EMOR exercise end</b> comments.

<p>And analogically, we also prepared a simulation environment in V-REP stored in file <code>exercise03.ttt</code>.
<b>You must run it before running your matlab script</b>.

<h2>Task requirements - generation of trajectory</h2>

You should write a program that:
<ol>
  <li> Moves the robot ahead (i.e. along the same orientation) until some of obstacles are near (e.g. in a distance smaller than 0.5m) </li>
  <li> Randomly selects new the orientation (e.g. from (30, 330) degrees) </li>
  <li> Rotates the robot so his orientation is the same as the randomly chosen one and starts to move ahead (enters the state from the first point)</li>
</ol>
As a result the robot should randomly "visit" different parts of the map, without colliding with obstacles.

<h2>Task requirements - particle filter</h2>

On the basis of the program generating the random trajectory you should write a program that:
<ol>
  <li> Initialize a set of particles (e.g. a size of 1000), each containing a random robot pose [x;y;orientation]  </li>
</ol>

You will require to implement additional functions, placed in <b>separate matlab scipts</b>: 
<ol>
  <li> A function responsible for moving "the robot" - aside of moving the real robot it should update the particle poses one by one by a given pose increment (x,y,orientation) with additional noise (gaussian noise with mean equal to zero and small variance)</li>
  <li> A function that updates the measurements by computing their gaussian distribution on the basis of distance (d) of the given measurement (x,y), i.e. x and y become in fact a mean_x and mean_y, whereas the variances sigma_x and sigma_y depend on the distance (bigger distance imposes bigger variances)</li>
  <li> A function that calculates the "importance weight" of each particle on the basis of mismatch between the actual measurements (i.e. readings from the Hokuyo lidars) and the predicted measurements
</ol>


1) Function for visualization
2) Resampling - randomly drawing 

15m x 15m x 0.4m



<h2 style="margin-top: 0">Grading</h2>
<ol>
  <li>Generation of trajectory (3p), including:</li>
	<ol>
  	<li>Moving the robot ahead  until an obstacle enters the "dangerous zone" (2p)</li>
  	<li>Random selection of new orientation and rotating the robot (1p)</li>
	</ol>
  <li>Particle filter (10p), including</li>
	<ol>
  	<li>Initialize a set of particles (1p)</li>
  	<li>Visualize particles (1p)</li>
	</ol>
</ol>


<p><b>Important:</b> You must modify only the indicated section of the <code>exercise03.m</code> script. Modification of other parts of the code are forbidden and will result in zero points from the project. 


<h2>Programming hints</h2>

The motion of the robot should be controlled by variables representing the relative velocities:
<ol>
  <li><code>forwBackVel</code> - linear velocity along the x axis of the robot [m/s] </li>
  <li><code>leftRightVel</code> - linear velocity along the y axis of the robot [m/s] </li>
  <li><code>rotVel</code> - angular velocity around the z axis of the robot [rad/s] </li>
</ol>

Additionally, you should gather and analyse data from the lidar sensors. There are two variables returned by the function:
<ol>
  <li><code>pts</code> - a table containing readings i.e. contact points,  in sensor's coordinates, each expressed as [x;y;z] </li>
  <li><code>contacts</code> - a table of values <0/1> determining whether an obstactle was detected or the reading corresponds to the maximal sensor range (in this case it is set to 5m) </li>
</ol>



<div class="figure" style="width: 580px"><div><img style="border: 1px solid black; width: 560px" src="raster/tut_03a_particles.png" alt="tut3a" /></div></div>

<div class="figure" style="width: 580px"><div><img style="border: 1px solid black; width: 560px" src="raster/tut_03b_particles.png" alt="tut3b" /></div></div>

</div>
      <div class="trailer_body">
        <div style="width: 100%; display: table;">
          <div style="display: table-row">
            <div style="width: 50%; display: table-cell; vertical-align: bottom;">
              Valid <a href="http://validator.w3.org/check?uri=referer">HTML5</a> and <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a>
            </div>

            <div style="width: 50%; display: table-cell; text-align: right; vertical-align: bottom;">
              &copy; Renaud Detry 2014<br>
              This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
